---
---
@import 'toolbox';
@import 'flickity';
@import 'variables';

@each $color in $colors{
  $book_selector: unquote(".book:nth-child(#{length($colors)}n + #{index($colors, $color)})");
  $nav_selector: unquote(".books__nav__item:nth-child(#{length($colors)}n + #{index($colors, $color)})");

  #{$book_selector} .highlight__content, #{$nav_selector}{
    background-color: unquote($color);
  }
}

* {
  @include box-sizing(border-box)
}

body{
  -webkit-font-smoothing: antialiased;
  background: $bg_default;
  color: $text_default;
  font-family: $serif;
  font-size: 18px;
  margin: 0;
}

a{
  color: $text_default;
}

p{
  margin: 0 0 1.5em;

  &:last-child{
    margin-bottom: 0;
  }
}

button{
  background: none;
  border: 0 none;
  padding: 0;
  margin: 0;
  cursor: pointer;
}

// NAV
// ========================================================
.nav{
  position: fixed;
  left: 0;
  bottom: 0;
  min-height: $h_nav;
  max-height: 100%;
  width: 100%;
  z-index: 20;
}

.nav__sticky{
  background: $bg_dark;
  height: $h_nav;
}

.nav__buttons{
  float: right;
}

.nav__button{
  width: $h_nav;
  height: $h_nav;
  background: #fff;
  color: $bg_dark;
  border: 0 none;
  border-left: 1px solid $bg_dark;
  font-size: 32px;
  float: left;
  transition: background-color 500ms ease, color 500ms ease;
  outline: none;

  &.is-inactive{
    pointer-events: none;
    background: $bg_dark;
    color: $text_faded;
  }

  &:hover{
    opacity: 0.6;
  }

  &:active{
    opacity: 0.3;
  }
}

.nav--collapse{
  display: none;
}

.showing-books-nav{
  overflow: auto;

  .nav--next, .nav--prev{
    display: none;
  }

  .nav--collapse{
    display: inline-block;
  }

  .books__nav__toggle:before{
    content: '-';
  }
}

.books__nav__toggle{
  line-height: $h_nav;
  font-family: $sans_condensed;
  font-size: 24px;
  color: $text_faded;
  margin-left: 20px;
  outline: none;

  &:hover{
    color: $text_default;
  }

  &:before{
    margin-right: 5px;
    position: relative;
    top: 2px;
    font-size: 85%;
    color: $text_default;
  }
}

// BOOKS NAV
// ========================================================
.books__nav{
  clear: both;
  margin: 0;
  padding: 0;
  list-style: none;
  display: none;
}

.books__nav__item{
  font-family: $sans_condensed;
  font-size: 90px;
  line-height: 1;
  padding: ($gutter * 1.4) ($gutter * 2) ($gutter * 2);
}

.books__nav__link{
  display: block;
  color: #000;
  text-decoration: none;

  &:hover{
    text-decoration: underline;
  }
}

// HIGHLIGHTS
// ========================================================
.container{
  position: fixed !important;
  bottom: $h_nav;
  left: 0;
  top: 0;
  width: 100%;
  overflow: auto;
  z-index: 10;
}

.book{
  max-width: 450px;
  width: 100%;
  padding: $gutter;
  overflow: auto;
  top: 10px;
  bottom: 0;
  border-right: 1px solid $border_color;

  &::-webkit-scrollbar {
    width: 2px;
  }

  &::-webkit-scrollbar-track {
    width: 2px;
    border-radius: 30px;
  }

  &::-webkit-scrollbar-thumb {
    outline: none;
    border-radius: 30px;
    background-color: lighten($border_color, 7%);
    width: 10px;
  }
}

.book__title{
  font-family: $sans_condensed;
  font-weight: 400;
  font-size: 44px;
  margin: 0;
  line-height: 1;
}

.book__credit{
  font-family: $sans_condensed;
  font-weight: 400;
  font-size: 24px;
  margin: 0;
  color: $text_faded;
}

.highlight{
  line-height: 1.3;
  margin-bottom: 15px;

  &:first-of-type{
    margin-top: $gutter;
  }
}

.highlight__content{
  padding: 15px 20px;
  margin: 0;
  border-radius: 2px;
  color: #000;
  border-bottom: 3px solid #000;
}

.highlight__footer{
  font-size: 12px;
  font-family: $sans;
  color: $text_faded;
  margin-top: 5px;
}

.highlight__link{
  vertical-align: middle;
  color: $text_faded;
  margin-right: 3px;

  &:hover{
    color: $text_default;
  }
}

// COMMENTS
// ========================================================
.comments{
  font-size: 14px;
}

.comment{
  border-bottom: 1px solid $bg_default;
  margin-bottom: 10px;
  padding-bottom: 10px;

  &:last-child{
    border-bottom: 0 none;
    margin-bottom: 0;
    padding-bottom: 0;
  }
}